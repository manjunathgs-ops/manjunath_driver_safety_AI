<!--<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver Safety AI</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #121212; color: white; text-align: center; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; }
        .video-box { border: 4px solid #333; border-radius: 15px; overflow: hidden; background: #000; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .status-panel { display: flex; justify-content: space-around; margin-top: 20px; }
        .indicator { padding: 15px 30px; border-radius: 10px; font-weight: bold; background: #333; transition: 0.3s; }
        .alert-active { background: #ff4b2b; color: white; animation: blink 1s infinite; }
        .safe { background: #2ecc71; color: white; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>Driver Monitoring System</h1>
        <div class="video-box">
            <img src="{{ url_for('video_feed') }}" width="100%">
        </div>
        <div class="status-panel">
            <div id="seatbelt-stat" class="indicator">Detecting Driver...</div>
            <div id="drowsy-stat" class="indicator">Monitoring Eyes...</div>
        </div>
    </div>

    <script>
        // Use Fetch API to get status from Flask server every 500ms [Flask Docs]
        async function updateStatus() {
            try {
                const response = await fetch('/get_status');
                const data = await response.json();

                const sb = document.getElementById('seatbelt-stat');
                const dr = document.getElementById('drowsy-stat');

                // Seatbelt Logic
                if (data.seatbelt) {
                    sb.innerText = "Driver Detected";
                    sb.className = "indicator safe";
                } else {
                    sb.innerText = "Driver Missing";
                    sb.className = "indicator alert-active";
                }

                // Drowsiness Logic
                if (data.drowsy) {
                    dr.innerText = "DROWSY ALERT!";
                    dr.className = "indicator alert-active";
                } else {
                    dr.innerText = "Driver Awake";
                    dr.className = "indicator safe";
                }
            } catch (err) { console.error("Error fetching status:", err); }
        }
        setInterval(updateStatus, 500); // Check twice every second
    </script>
</body>
</html>-->

<!--

<!DOCTYPE html>
<html>
<head>
    <title>AI Driver Safety</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; text-align: center; }
        .indicator { padding: 15px; border-radius: 8px; margin: 10px; display: inline-block; width: 180px; font-weight: bold; background: #333; transition: 0.3s; }
        .safe { background: #2ecc71; }
        .alert { background: #e74c3c; animation: blink 1s infinite; }
        .btn { width: 120px; height: 120px; border-radius: 50%; border: 5px solid #444; background: #222; color: #666; font-weight: bold; cursor: not-allowed; margin: 20px auto; display: flex; align-items: center; justify-content: center; transition: 0.4s; }
        .btn-ready { border-color: #f1c40f; color: #f1c40f; cursor: pointer; box-shadow: 0 0 15px #f1c40f; }
        .btn-on { border-color: #2ecc71; color: #2ecc71; box-shadow: 0 0 25px #2ecc71; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>
    <h1>Driver Monitoring System</h1>
    <img src="{{ url_for('video_feed') }}" style="border: 5px solid #333; border-radius: 10px; width: 640px;">
    
    <div id="start-btn" class="btn" onclick="tryStart()">ENGINE<br>START</div>

    <div>
        <div id="sb" class="indicator">Seatbelt...</div>
        <div id="dr" class="indicator">Drowsiness...</div>
        <div id="yn" class="indicator">Yawns: 0</div>
    </div>
    <h2 id="suggest" style="color: #f1c40f;"></h2>

    <script>
        async function tryStart() {
            const res = await fetch('/start_engine', { method: 'POST' });
            const data = await res.json();
            if(!data.success) alert(data.message);
        }

        async function update() {
            const res = await fetch('/get_status');
            const data = await res.json();
            
            document.getElementById('sb').className = "indicator " + (data.seatbelt ? "safe" : "alert");
            document.getElementById('sb').innerText = data.seatbelt ? "Belt Buckled" : "Buckle Up!";
            
            document.getElementById('dr').className = "indicator " + (data.drowsy ? "alert" : "safe");
            document.getElementById('dr').innerText = data.drowsy ? "DROWSY ALERT" : "Eyes Open";
            
            document.getElementById('yn').innerText = "Yawns: " + data.yawn_count;
            document.getElementById('suggest').innerText = data.suggestion;

            const btn = document.getElementById('start-btn');
            if (data.engine_started) { btn.className = "btn btn-on"; btn.innerHTML = "ENGINE<br>ON"; }
            else if (data.seatbelt) { btn.className = "btn btn-ready"; btn.innerHTML = "READY<br>START"; }
            else { btn.className = "btn"; btn.innerHTML = "LOCKED"; }
        }
        setInterval(update, 500);
    </script>
</body>
</html-->


<!--
<!DOCTYPE html>
<html>
<head>
    <title>AI Driver Safety - Personal Guard</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #1a1a1a; color: white; text-align: center; }
        .indicator { padding: 15px; border-radius: 8px; margin: 10px; display: inline-block; width: 180px; font-weight: bold; background: #333; }
        .safe { background: #2ecc71; }
        .alert { background: #e74c3c; animation: blink 1s infinite; }
        .btn { width: 100px; height: 100px; border-radius: 50%; border: 5px solid #444; background: #222; color: #666; font-weight: bold; cursor: not-allowed; margin: 20px auto; display: flex; align-items: center; justify-content: center; }
        .btn-ready { border-color: #f1c40f; color: #f1c40f; cursor: pointer; }
        .btn-on { border-color: #2ecc71; color: #2ecc71; box-shadow: 0 0 20px #2ecc71; }
        
        /* Motivation Box */
        #suggestion-box { display: none; background: #2c3e50; padding: 20px; border-radius: 15px; width: 80%; margin: 20px auto; border: 2px solid #f1c40f; }
        .choice-btn { padding: 10px 20px; margin: 10px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .choice-tea { background: #e67e22; color: white; }
        .choice-quote { background: #3498db; color: white; }
        
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>
    <h1>AI Safety Dashboard</h1>
    <img src="{{ url_for('video_feed') }}" style="border-radius: 10px; width: 600px;">
    
    <div id="start-btn" class="btn" onclick="tryStart()">START</div>

    <div id="suggestion-box">
        <h3 id="suggest-text"></h3>
        <button class="choice-tea" onclick="findTea()">Find Tea Stalls</button>
        <button class="choice-quote" onclick="giveMotivation()">Motivation</button>
    </div>

    <div>
        <div id="sb" class="indicator">Seatbelt</div>
        <div id="dr" class="indicator">Drowsiness</div>
        <div id="yn" class="indicator">Yawns: 0</div>
    </div>

    <script>
        const quotes = [
            "Your family is waiting for your smile at home. Drive safe.",
            "Work is important, but your life is everything to your children.",
            "A 10-minute break is better than a lifetime of regret.",
            "Think of your mother's face. She is praying for your safe arrival.",
            "Success is only possible if you reach your destination alive."
        ];

        let lastVoiceTime = 0;

        function speak(text, lang='en-IN') {
            const now = Date.now();
            if (now - lastVoiceTime > 7000) {
                const msg = new SpeechSynthesisUtterance(text);
                msg.lang = lang;
                window.speechSynthesis.speak(msg);
                lastVoiceTime = now;
            }
        }

        function giveMotivation() {
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            alert("ðŸ’¡ MOTIVATION: " + randomQuote);
            speak(randomQuote, 'en-US');
        }

        function findTea() {
            window.open("https://www.google.com", "_blank");
        }

        async function tryStart() {
            const res = await fetch('/start_engine', { method: 'POST' });
            const data = await res.json();
            if(!data.success) alert(data.message);
        }

        async function update() {
            const res = await fetch('/get_status');
            const data = await res.json();
            
            // Seatbelt & Drowsy Logic
            document.getElementById('sb').className = "indicator " + (data.seatbelt ? "safe" : "alert");
            document.getElementById('dr').className = "indicator " + (data.drowsy ? "alert" : "safe");
            document.getElementById('yn').innerText = "Yawns: " + data.yawn_count;

            // Voice Alert for Drowsy
            if (data.drowsy) {
                // Telugu: Namaskaram, you are getting sleepy...
                speak("à°¨à°®à°¸à±à°•à°¾à°°à°‚, à°®à±€à°•à± à°¨à°¿à°¦à±à°° à°µà°¸à±à°¤à±‹à°‚à°¦à°¿, à°¦à°¯à°šà±‡à°¸à°¿ à°œà°¾à°—à±à°°à°¤à±à°¤à°—à°¾ à°‰à°‚à°¡à°‚à°¡à°¿", 'te-IN');
            }

            // Suggestion Box Logic
            const sBox = document.getElementById('suggestion-box');
            if (data.yawn_count >= 3) {
                sBox.style.display = "block";
                document.getElementById('suggest-text').innerText = "Namaskaram! You look tired. Shall I suggest tea or some motivation?";
            }

            // Engine Button Logic
            const btn = document.getElementById('start-btn');
            if (data.engine_started) { btn.className = "btn btn-on"; btn.innerHTML = "ON"; }
            else if (data.seatbelt) { btn.className = "btn btn-ready"; btn.innerHTML = "READY"; }
            else { btn.className = "btn"; btn.innerHTML = "LOCKED"; }
        }
        setInterval(update, 1000);
    </script>
</body>
</html>-->


<!DOCTYPE html>
<html>
<head>
    <title>Kuppam Safe Drive AI</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #121212; color: white; text-align: center; margin: 0; padding: 20px; }
        .indicator { padding: 15px; border-radius: 8px; margin: 10px; display: inline-block; width: 180px; font-weight: bold; background: #333; }
        .safe { background: #2ecc71; }
        .alert { background: #e74c3c; animation: blink 1s infinite; }
        .btn { width: 100px; height: 100px; border-radius: 50%; border: 5px solid #444; background: #222; color: #666; font-weight: bold; cursor: pointer; margin: 20px auto; display: flex; align-items: center; justify-content: center; transition: 0.4s; }
        .btn-ready { border-color: #f1c40f; color: #f1c40f; }
        .btn-on { border-color: #2ecc71; color: #2ecc71; box-shadow: 0 0 20px #2ecc71; }
        #suggestion-box { display: none; background: #1e272e; padding: 20px; border-radius: 15px; width: 80%; margin: 20px auto; border: 2px solid #f1c40f; }
        .choice-btn { padding: 12px 25px; margin: 10px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    </style>
</head>
<body>
    <h1>AI Driver Monitoring - Kuppam</h1>
    <img src="{{ url_for('video_feed') }}" style="border-radius: 10px; width: 600px; border: 3px solid #333;">
    
    <div id="start-btn" class="btn" onclick="tryStart()">LOCKED</div>

    <div id="suggestion-box">
        <h3 id="suggest-text"></h3>
        <button class="choice-btn" style="background:#d35400;" onclick="findTea()">Tea Stalls in Kuppam</button>
        <button class="choice-btn" style="background:#2980b9;" onclick="giveMotivation()">Motivation</button>
    </div>

    <div>
        <div id="sb" class="indicator">Seatbelt</div>
        <div id="dr" class="indicator">Drowsiness</div>
        <div id="yn" class="indicator">Yawns: 0</div>
    </div>

    <script>
        const quotes = [
            "Your family is waiting for your presence at home. Drive safe.",
            "Success at work is only worth it if you come home alive.",
            "Your children's future depends on your safety today.",
            "Take a break. Your family is praying for your safe arrival."
        ];

        let lastVoiceTime = 0;

        function speak(text, lang) {
            const now = Date.now();
            if (now - lastVoiceTime > 8000) {
                const msg = new SpeechSynthesisUtterance(text);
                msg.lang = lang;
                window.speechSynthesis.speak(msg);
                lastVoiceTime = now;
            }
        }

        function giveMotivation() {
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            speak(randomQuote, 'en-IN');
            alert("ðŸ’¡ MOTIVATION: " + randomQuote);
        }

        function findTea() {
            window.open("https://www.google.com", "_blank");
        }

        async function tryStart() {
            const res = await fetch('/start_engine', { method: 'POST' });
            const data = await res.json();
            if(!data.success) alert(data.message);
        }

        async function update() {
            try {
                const res = await fetch('/get_status');
                const data = await res.json();
                
                document.getElementById('sb').className = "indicator " + (data.seatbelt ? "safe" : "alert");
                document.getElementById('sb').innerText = data.seatbelt ? "Belt Buckled" : "Buckle Up!";
                document.getElementById('dr').className = "indicator " + (data.drowsy ? "alert" : "safe");
                document.getElementById('dr').innerText = data.drowsy ? "DROWSY ALERT" : "Eyes Open";
                document.getElementById('yn').innerText = "Yawns: " + data.yawn_count;

                if (data.drowsy) {
                    speak("à°¨à°®à°¸à±à°•à°¾à°°à°‚, à°®à±€à°•à± à°¨à°¿à°¦à±à°° à°µà°¸à±à°¤à±‹à°‚à°¦à°¿, à°¦à°¯à°šà±‡à°¸à°¿ à°œà°¾à°—à±à°°à°¤à±à°¤à°—à°¾ à°‰à°‚à°¡à°‚à°¡à°¿", 'te-IN');
                }

                if (data.yawn_count >= 3) {
                    document.getElementById('suggestion-box').style.display = "block";
                    document.getElementById('suggest-text').innerText = "Namaskaram! You look tired. Suggesting tea stalls in Kuppam or motivation?";
                }

                const btn = document.getElementById('start-btn');
                if (data.engine_started) { btn.className = "btn btn-on"; btn.innerHTML = "ON"; }
                else if (data.seatbelt) { btn.className = "btn btn-ready"; btn.innerHTML = "READY"; }
                else { btn.className = "btn"; btn.innerHTML = "LOCKED"; }
            } catch(e) {}
        }
        setInterval(update, 1000);
    </script>
</body>
</html>



